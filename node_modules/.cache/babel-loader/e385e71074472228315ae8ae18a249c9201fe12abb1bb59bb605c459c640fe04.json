{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ShowReelList=()=>{const[showReels,setShowReels]=useState([]);const[expandedReelId,setExpandedReelId]=useState(null);const[associatedClips,setAssociatedClips]=useState([]);useEffect(()=>{fetchShowReels();},[]);const fetchShowReels=async()=>{try{const response=await axios.get('/show_reels');setShowReels(response.data);}catch(error){console.error('Error fetching show reels:',error);}};const fetchAssociatedClips=async showReelId=>{try{const response=await axios.get(\"/show_reels/\".concat(showReelId,\"/clips\"));setAssociatedClips(response.data);}catch(error){console.error('Error fetching associated clips:',error);}};const handleSelectShowReel=showReel=>{if(expandedReelId===showReel.id){setExpandedReelId(null);setAssociatedClips([]);}else{setExpandedReelId(showReel.id);fetchAssociatedClips(showReel.id);}};const handleRemoveClip=async(showReelId,clipId)=>{try{await axios.delete(\"/show_reels/\".concat(showReelId,\"/clips/\").concat(clipId));fetchAssociatedClips(showReelId);// Re-fetch the associated clips after removal\nfetchShowReels();// Re-fetch the show reels to update the total duration\n}catch(error){console.error('Error removing video clip:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Show Reels\"}),showReels.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No show reels available\"}):/*#__PURE__*/_jsx(\"div\",{className:\"list-group mb-4\",children:showReels.map(showReel=>/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:showReel.name}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Total Duration: \",showReel.total_duration]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:()=>handleSelectShowReel(showReel),children:expandedReelId===showReel.id?'Hide Clips':'Show Clips'})]}),expandedReelId===showReel.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"collapse show\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:associatedClips.length===0?/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:\"No clips available\"}):associatedClips.map(clip=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[clip.name,/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",type:\"button\",onClick:()=>handleRemoveClip(showReel.id,clip.id),children:\"Remove\"})]},clip.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(Link,{to:\"/create_clip/\".concat(showReel.id),className:\"btn btn-primary\",children:\"Create Clip\"})})]})]},showReel.id))})]});};export default ShowReelList;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","jsx","_jsx","jsxs","_jsxs","ShowReelList","showReels","setShowReels","expandedReelId","setExpandedReelId","associatedClips","setAssociatedClips","fetchShowReels","response","get","data","error","console","fetchAssociatedClips","showReelId","concat","handleSelectShowReel","showReel","id","handleRemoveClip","clipId","delete","className","children","length","map","name","total_duration","type","onClick","clip","to"],"sources":["/Users/pyaephyoshan/programming/PPS/Reel_Clips_FrontEnd/src/components/ShowReelList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nconst ShowReelList = () => {\n  const [showReels, setShowReels] = useState([]);\n  const [expandedReelId, setExpandedReelId] = useState(null);\n  const [associatedClips, setAssociatedClips] = useState([]);\n\n  useEffect(() => {\n    fetchShowReels();\n  }, []);\n\n  const fetchShowReels = async () => {\n    try {\n      const response = await axios.get('/show_reels');\n      setShowReels(response.data);\n    } catch (error) {\n      console.error('Error fetching show reels:', error);\n    }\n  };\n\n  const fetchAssociatedClips = async (showReelId) => {\n    try {\n      const response = await axios.get(`/show_reels/${showReelId}/clips`);\n      setAssociatedClips(response.data);\n    } catch (error) {\n      console.error('Error fetching associated clips:', error);\n    }\n  };\n\n  const handleSelectShowReel = (showReel) => {\n    if (expandedReelId === showReel.id) {\n      setExpandedReelId(null);\n      setAssociatedClips([]);\n    } else {\n      setExpandedReelId(showReel.id);\n      fetchAssociatedClips(showReel.id);\n    }\n  };\n\n  const handleRemoveClip = async (showReelId, clipId) => {\n    try {\n      await axios.delete(`/show_reels/${showReelId}/clips/${clipId}`);\n      fetchAssociatedClips(showReelId); // Re-fetch the associated clips after removal\n      fetchShowReels(); // Re-fetch the show reels to update the total duration\n    } catch (error) {\n      console.error('Error removing video clip:', error);\n    }\n  };\n\n  return (\n    <div className=\"container py-4\">\n      <h2 className=\"mb-4\">Show Reels</h2>\n      {showReels.length === 0 ? (\n        <p>No show reels available</p>\n      ) : (\n        <div className=\"list-group mb-4\">\n          {showReels.map((showReel) => (\n            <div key={showReel.id} className=\"card mb-3\">\n              <div className=\"card-body d-flex justify-content-between align-items-center\">\n                <div>\n                  <p className=\"mb-0\">{showReel.name}</p>\n                  <small>Total Duration: {showReel.total_duration}</small>\n                </div>\n                <button\n                  className=\"btn btn-secondary\"\n                  type=\"button\"\n                  onClick={() => handleSelectShowReel(showReel)}\n                >\n                  {expandedReelId === showReel.id ? 'Hide Clips' : 'Show Clips'}\n                </button>\n              </div>\n              {expandedReelId === showReel.id && (\n                <div className=\"collapse show\">\n                  <ul className=\"list-group list-group-flush\">\n                    {associatedClips.length === 0 ? (\n                      <li className=\"list-group-item\">No clips available</li>\n                    ) : (\n                      associatedClips.map((clip) => (\n                        <li key={clip.id} className=\"list-group-item d-flex justify-content-between align-items-center\">\n                          {clip.name}\n                          <button\n                            className=\"btn btn-danger btn-sm\"\n                            type=\"button\"\n                            onClick={() => handleRemoveClip(showReel.id, clip.id)}\n                          >\n                            Remove\n                          </button>\n                        </li>\n                      ))\n                    )}\n                  </ul>\n                  <div className=\"card-footer\">\n                    <Link to={`/create_clip/${showReel.id}`} className=\"btn btn-primary\">\n                      Create Clip\n                    </Link>\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ShowReelList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}